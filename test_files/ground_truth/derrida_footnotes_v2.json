{
  "test_name": "derrida_footnotes_v2",
  "pdf_file": "test_files/derrida_footnote_pages_120_125.pdf",
  "metadata": {
    "pages": 6,
    "physical_page_start": 29,
    "created_date": "2025-10-22",
    "verified_by": "visual_inspection_claude",
    "description": "Derrida - Of Grammatology pages 120-125 (physical p.29-34) with translator footnotes. CRITICAL: Text layer has severe symbol corruption in footnote area."
  },

  "features": {
    "footnotes": [
      {
        "page_index": 1,
        "physical_page": 30,
        "marker": {
          "symbol": "*",
          "unicode": "0x2a",
          "bbox": [317.31, 104.61, 324.91, 120.05],
          "location_type": "section_heading_suffix",
          "context_before": "and the Inside",
          "context_after": "",
          "font": {
            "name": "Helvetica-Oblique",
            "size": 11.4,
            "is_superscript": false
          },
          "corruption": {
            "extracted_as": "*",
            "extraction_reliable": true,
            "footer_corrupts_to": "iii",
            "corruption_probability": 0.03
          }
        },
        "definition": {
          "content": "The title of the next section is \"The Outside ⨯ the Inside\" (65, 44). In French, \"is\" (est) and \"and\" (et) \"sound the same.\" For Derrida's discussion of the complicity between supplementation (and) and the copula (is), see particularly \"Le Supplément de copule: la philosophie devant la linguistique,\" MP, pp. 209-46.",
          "bbox": [42.67, 494.94, 367.80, 553.13],
          "starts_with_corrupted": "iii",
          "location_type": "page_bottom",
          "page_index": 1,
          "font": {
            "name": "Times-Roman",
            "size": 9.0,
            "size_ratio_to_body": 0.79
          }
        },
        "pairing": {
          "spatial_distance": 395.3,
          "sequence_position": 0,
          "confidence_min": 0.85
        },
        "schema_info": {
          "schema_type": "symbolic",
          "sequence_index": 0,
          "expected_next": "†"
        },
        "note_type": "translator_note"
      },
      {
        "page_index": 1,
        "physical_page": 30,
        "marker": {
          "symbol": "†",
          "unicode": "0x2020",
          "bbox": [201.73, 325.89, 213.90, 340.73],
          "location_type": "page_reference_bracket",
          "context_before": "[p. 23",
          "context_after": "]. This representative",
          "font": {
            "name": "Helvetica",
            "size": 11.0,
            "is_superscript": false
          },
          "corruption": {
            "extracted_as": "t",
            "extraction_reliable": false,
            "footer_corrupts_to": "t",
            "corruption_probability": 0.85
          }
        },
        "definition": {
          "content": "Hereafter page numbers in parenthesis refer to the original work and those in brackets to the translation.",
          "bbox": [42.67, 494.94, 367.80, 553.13],
          "starts_with_corrupted": "t",
          "location_type": "page_bottom",
          "page_index": 1,
          "font": {
            "name": "Times-Roman",
            "size": 9.0,
            "size_ratio_to_body": 0.79
          }
        },
        "pairing": {
          "spatial_distance": 172.5,
          "sequence_position": 1,
          "confidence_min": 0.80
        },
        "schema_info": {
          "schema_type": "symbolic",
          "sequence_index": 1,
          "expected_prev": "*",
          "schema_validates": true
        },
        "note_type": "translator_note"
      }
    ],
    "citations": [],
    "xmarks": [],
    "formatting": []
  },

  "corruption_model": {
    "symbol_mappings": {
      "iii": {
        "actual_symbol": "*",
        "unicode": "0x2a",
        "probability": 0.92,
        "location": "footnote_definition_area",
        "font_context": "Times-Roman at page bottom"
      },
      "t": {
        "actual_symbol": "†",
        "unicode": "0x2020",
        "probability": 0.85,
        "location": "both_body_and_footer",
        "font_context": "Helvetica in body, Times-Roman in footer"
      }
    },
    "font_issues": [
      {
        "font_name": "Times-Roman",
        "affected_symbols": ["*", "†"],
        "corruption_pattern": "Symbol glyphs not in standard Unicode range, extract as lookalike ASCII",
        "region": "page_bottom_footnote_area"
      }
    ],
    "inference_rules": {
      "schema_sequence": ["*", "†"],
      "schema_type": "symbolic",
      "markov_recovery": "If see [*, 't'], and schema predicts †, then 't' → † with confidence 0.95 * 0.85 = 0.81"
    }
  },

  "expected_quality": {
    "quality_score_min": 0.90,
    "quality_flags": ["has_footnotes", "translator_notes", "symbol_corruption", "requires_probabilistic_recovery"],
    "processing_time_max_ms": 15000,
    "footnote_detection_required": true,
    "corruption_recovery_required": true,
    "notes": "15s budget with corruption-aware detection (no expensive OCR needed for this case)"
  },

  "validation_criteria": {
    "all_footnotes_detected": true,
    "symbols_correctly_inferred": true,
    "marker_content_linked": true,
    "pairing_complete": true,
    "no_orphaned_markers": true,
    "no_orphaned_definitions": true,
    "confidence_calibrated": true,
    "schema_consistent": true
  },

  "ml_features": {
    "description": "Pre-computed features for CRF/HMM training",
    "spatial_features": {
      "page_height": 613.80,
      "footnote_zone_y_start": 460.35,
      "marker_1_distance_from_bottom": 509.19,
      "marker_2_distance_from_bottom": 287.91
    },
    "font_features": {
      "body_font_size_median": 11.4,
      "footnote_font_size": 9.0,
      "size_ratio": 0.79
    },
    "sequence_features": {
      "schema_type": "symbolic",
      "sequence_length": 2,
      "sequence": ["*", "†"],
      "follows_standard_schema": true
    }
  },

  "notes": "Ground truth v2: ML-optimized with bbox coordinates, enums, and corruption model. Verified by visual PDF inspection. Asterisk extracts correctly, dagger corrupts to 't'. Use Markov schema inference: P(† | after *) × P('t' | †) = high confidence for recovery."
}
